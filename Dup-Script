--// CONFIGURAÃ‡ÃƒO DA KEY
local CorrectKey = "NOBRE_123" -- Mude aqui a sua chave!

--// SERVICES
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UIS = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera

--// STATES
local AimbotEnabled = false
local ESPEnabled = false
local InfJump = false
local TargetPart = "Head"

--// [SISTEMA DE KEY - INICIO]
local KeyGui = Instance.new("ScreenGui", game.CoreGui)
KeyGui.Name = "KeySystem_Nobre"

local KeyFrame = Instance.new("Frame", KeyGui)
KeyFrame.Size = UDim2.fromOffset(300, 200)
KeyFrame.Position = UDim2.fromScale(0.5, 0.5)
KeyFrame.AnchorPoint = Vector2.new(0.5, 0.5)
KeyFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
KeyFrame.BorderSizePixel = 0
local keyCorner = Instance.new("UICorner", KeyFrame)

local KeyTitle = Instance.new("TextLabel", KeyFrame)
KeyTitle.Size = UDim2.fromScale(1, 0.3)
KeyTitle.Text = "SISTEMA DE KEY"
KeyTitle.TextColor3 = Color3.new(1,1,1)
KeyTitle.Font = Enum.Font.GothamBold
KeyTitle.BackgroundTransparency = 1
KeyTitle.TextSize = 20

local KeyInput = Instance.new("TextBox", KeyFrame)
KeyInput.Size = UDim2.fromScale(0.8, 0.25)
KeyInput.Position = UDim2.fromScale(0.1, 0.35)
KeyInput.PlaceholderText = "Digite a Key aqui..."
KeyInput.Text = ""
KeyInput.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
KeyInput.TextColor3 = Color3.new(1,1,1)
local inputCorner = Instance.new("UICorner", KeyInput)

local KeyBtn = Instance.new("TextButton", KeyFrame)
KeyBtn.Size = UDim2.fromScale(0.8, 0.25)
KeyBtn.Position = UDim2.fromScale(0.1, 0.65)
KeyBtn.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
KeyBtn.Text = "VERIFICAR"
KeyBtn.TextColor3 = Color3.new(1,1,1)
KeyBtn.Font = Enum.Font.GothamBold
local btnCorner = Instance.new("UICorner", KeyBtn)

--// FUNÃ‡ÃƒO PRINCIPAL DO HUB (Seu cÃ³digo original vai aqui dentro)
local function MainHub()
	local gui = Instance.new("ScreenGui", game.CoreGui)
	gui.Name = "NOBRE_HUB"

	local frame = Instance.new("Frame", gui)
	frame.Size = UDim2.fromScale(0.32, 0.42)
	frame.Position = UDim2.fromScale(0.34, 0.28)
	frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
	frame.Active = true
	frame.Draggable = true
	Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 16)

	local title = Instance.new("TextLabel", frame)
	title.Size = UDim2.fromScale(1, 0.15)
	title.BackgroundTransparency = 1
	title.Text = "ðŸ”¥ NOBRE HUB"
	title.TextColor3 = Color3.fromRGB(255, 255, 255)
	title.Font = Enum.Font.GothamBold
	title.TextScaled = true

	-- FunÃ§Ãµes de suporte (Aimbot, ESP, Jump) permanecem as mesmas
	local function getChar() return LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait() end

	local function getClosestPlayer()
		local char = getChar()
		local root = char:FindFirstChild("HumanoidRootPart")
		if not root then return end
		local closest, shortest = nil, math.huge
		for _, plr in ipairs(Players:GetPlayers()) do
			if plr ~= LocalPlayer and plr.Character then
				local hrp = plr.Character:FindFirstChild("HumanoidRootPart")
				local hum = plr.Character:FindFirstChildOfClass("Humanoid")
				if hrp and hum and hum.Health > 0 then
					local dist = (hrp.Position - root.Position).Magnitude
					if dist < shortest then shortest = dist; closest = plr end
				end
			end
		end
		return closest
	end

	RunService.RenderStepped:Connect(function()
		if not AimbotEnabled then return end
		local target = getClosestPlayer()
		if target and target.Character then
			local part = target.Character:FindFirstChild(TargetPart)
			if part then
				Camera.CFrame = Camera.CFrame:Lerp(CFrame.new(Camera.CFrame.Position, part.Position), 0.25)
			end
		end
	end)

	local ESPObjects = {}
	local function clearESP()
		for _, v in ipairs(ESPObjects) do if v and v.Parent then v:Destroy() end end
		table.clear(ESPObjects)
	end

	local function createESP(player)
		if player == LocalPlayer then return end
		local function apply(char)
			local hl = Instance.new("Highlight")
			hl.FillColor = Color3.fromRGB(255, 0, 0)
			hl.Adornee = char
			hl.Parent = char
			table.insert(ESPObjects, hl)
		end
		if player.Character then apply(player.Character) end
		player.CharacterAdded:Connect(apply)
	end

	UIS.JumpRequest:Connect(function()
		if InfJump then
			local hum = getChar():FindFirstChildOfClass("Humanoid")
			if hum then hum:ChangeState(Enum.HumanoidStateType.Jumping) end
		end
	end)

	local function makeButton(text, yPos, callback)
		local btn = Instance.new("TextButton", frame)
		btn.Size = UDim2.fromScale(0.85, 0.15)
		btn.Position = UDim2.fromScale(0.075, yPos)
		btn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
		btn.TextColor3 = Color3.fromRGB(255, 255, 255)
		btn.Font = Enum.Font.GothamBold
		btn.TextScaled = true
		btn.Text = text
		Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 12)
		btn.MouseButton1Click:Connect(function() callback(btn) end)
		return btn
	end

	makeButton("ðŸŽ¯ Aimbot: OFF", 0.22, function(self)
		AimbotEnabled = not AimbotEnabled
		self.Text = "ðŸŽ¯ Aimbot: " .. (AimbotEnabled and "ON" or "OFF")
	end)

	makeButton("ðŸ‘ ESP: OFF", 0.40, function(self)
		ESPEnabled = not ESPEnabled
		if ESPEnabled then for _, p in ipairs(Players:GetPlayers()) do createESP(p) end 
		else clearESP() end
		self.Text = "ðŸ‘ ESP: " .. (ESPEnabled and "ON" or "OFF")
	end)

	makeButton("ðŸ¦˜ Infinite Jump: OFF", 0.58, function(self)
		InfJump = not InfJump
		self.Text = "ðŸ¦˜ Infinite Jump: " .. (InfJump and "ON" or "OFF")
	end)

	makeButton("âŒ Fechar", 0.76, function() gui:Destroy() end)
end

--// LOGICA DO BOTÃƒO DE KEY
KeyBtn.MouseButton1Click:Connect(function()
	if KeyInput.Text == CorrectKey then
		KeyGui:Destroy() -- Deleta a tela de key
		MainHub()      -- Abre o Script principal
	else
		KeyInput.Text = ""
		KeyInput.PlaceholderText = "KEY INCORRETA!"
		wait(1)
		KeyInput.PlaceholderText = "Digite a Key aqui..."
	end
end)
